window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("avatar-img");t&&t.addEventListener("error",function(){this.src="https://ui-avatars.com/api/?name=Wu+Zi&background=random"});const e=document.getElementById("lang-menu-btn"),n=document.getElementById("lang-menu");if(e&&n){const t=t=>{const i=n.classList.contains("hidden");void 0===t&&(t=i),t?(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true")):(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"))};e.addEventListener("click",e=>{e.stopPropagation(),t()}),document.addEventListener("click",i=>{n.contains(i.target)||e.contains(i.target)||t(!1)}),document.addEventListener("keydown",i=>{"Escape"!==i.key||n.classList.contains("hidden")||(t(!1),e.focus())});const i=n.querySelectorAll("a"),o=(t,e,n)=>{const i=document.querySelector(`meta[${t}="${e}"]`);i&&(i.content=n)},d=(t,e)=>{const n=document.getElementById(t);n&&(n.innerText=e)},a=(t,e)=>{const n=document.getElementById(t);n&&(n.innerHTML=e)},c=t=>{t&&(t.classList.remove("animate-fade-in"),t.offsetWidth,t.classList.add("animate-fade-in"))},r=t=>{const e=window.I18N&&window.I18N[t];if(!e)return;if(document.documentElement.lang=t,document.title=e.title,o("name","title",e.title),o("name","description",e.description),o("property","og:title",e.title),o("property","og:description",e.description),o("property","twitter:title",e.title),o("property","twitter:description",e.description),window.SITE_CONFIG){let e="";"zh"===t?e="zh/":"ja"===t&&(e="ja/");const n=`${window.SITE_CONFIG.siteUrl}${e}`;o("property","og:url",n),o("property","twitter:url",n)}d("profile-name",e.name),a("profile-bio",e.bio),d("contact-text",e.saveContact);const n=document.getElementById("contact-btn");n&&window.SITE_CONFIG&&(n.href=`${window.SITE_CONFIG.baseUrl}${t}.vcf`);const r=document.getElementById("profile-name");r&&r.parentElement&&c(r.parentElement),c(document.getElementById("contact-text")),c(document.getElementById("contact-icon")),i.forEach(e=>{const n=e.getAttribute("href");let i="en";n.includes("/zh/")?i="zh":n.includes("/ja/")&&(i="ja"),i===t?e.classList.add("bg-gray-50","dark:bg-zinc-700/50","font-bold"):e.classList.remove("bg-gray-50","dark:bg-zinc-700/50","font-bold")})};window.I18N&&window.SITE_CONFIG&&(i.forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const i=e.getAttribute("href");let o="en";i.includes("/zh/")?o="zh":i.includes("/ja/")&&(o="ja"),r(o),window.history.pushState({lang:o},"",i),t(!1)})}),window.addEventListener("popstate",()=>{const t=window.location.pathname;let e="en";t.includes("/zh/")?e="zh":t.includes("/ja/")&&(e="ja"),r(e)}))}});