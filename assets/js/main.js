window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("avatar-img");t&&t.addEventListener("error",function(){this.src="https://ui-avatars.com/api/?name=Wu+Zi&background=random"});const e=document.getElementById("lang-menu-btn"),n=document.getElementById("lang-menu");if(e&&n){const t={en:"",zh:"zh/",ja:"ja/"},o=t=>{const o=n.classList.contains("hidden");void 0===t&&(t=o),t?(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true")):(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"))};e.addEventListener("click",t=>{t.stopPropagation(),o()}),document.addEventListener("click",t=>{n.contains(t.target)||e.contains(t.target)||o(!1)}),document.addEventListener("keydown",t=>{"Escape"!==t.key||n.classList.contains("hidden")||(o(!1),e.focus())});const i=n.querySelectorAll("a"),a={name:new Map,property:new Map},c=(t,e)=>{e.forEach(e=>{const n=document.querySelector(`meta[${t}="${e}"]`);n&&a[t].set(e,n)})};c("name",["title","description"]),c("property",["og:title","og:description","twitter:title","twitter:description","og:url","twitter:url"]);const r={profileName:document.getElementById("profile-name"),profileBio:document.getElementById("profile-bio"),contactBtn:document.getElementById("contact-btn"),contactText:document.getElementById("contact-text"),contactIcon:document.getElementById("contact-icon")},d=r.profileName?.parentElement,s=(t,e,n)=>{const o=a[t].get(e);o&&(o.content=n)},l=(t,e)=>{Object.entries(e).forEach(([e,n])=>s(t,e,n))},p=(t,e)=>{t&&(t.innerText=e)},m=(t,e)=>{t&&(t.innerHTML=e)},u=t=>{t&&(t.classList.remove("animate-fade-in"),t.offsetWidth,t.classList.add("animate-fade-in"))},w=(e=window.location.pathname)=>{const n=e.startsWith("http")?e.replace(/^https?:\/\/[^/]+/,""):e,[,o=""]=n.replace(/^\/+/,"/").split("/"),i=o?`${o}/`:"",a=Object.entries(t).find(([,t])=>t===i);return a?a[0]:"en"},f=t=>{if(t?.dataset?.lang)return t.dataset.lang;const e=t?.getAttribute("href")||window.location.pathname;return w(e)};let g=null;const E=e=>{if(!e||e===g)return;const n=window.I18N&&window.I18N[e];if(n){if(document.documentElement.lang=e,document.title=n.title,l("name",{title:n.title,description:n.description}),l("property",{"og:title":n.title,"og:description":n.description,"twitter:title":n.title,"twitter:description":n.description}),window.SITE_CONFIG){const n=`${window.SITE_CONFIG.siteUrl}${t[e]||""}`;l("property",{"og:url":n,"twitter:url":n})}p(r.profileName,n.name),m(r.profileBio,n.bio),p(r.contactText,n.saveContact),r.contactBtn&&window.SITE_CONFIG&&(r.contactBtn.href=`${window.SITE_CONFIG.baseUrl}${e}.vcf`),d&&u(d),u(r.contactText),u(r.contactIcon),i.forEach(t=>{const n=f(t)===e?"add":"remove";t.classList[n]("bg-gray-50","dark:bg-zinc-700/50","font-bold")}),g=e}};if(window.I18N&&window.SITE_CONFIG){i.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=t.getAttribute("href"),i=f(t);E(i),window.history.pushState({lang:i},"",n),o(!1)})}),window.addEventListener("popstate",()=>{const t=w(window.location.pathname);E(t)});const t=w();E(t)}}});