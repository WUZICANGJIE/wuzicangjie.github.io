window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("avatar-img");t&&t.addEventListener("error",function(){this.src="https://ui-avatars.com/api/?name=Wu+Zi&background=random"});const e=document.getElementById("lang-menu-btn"),n=document.getElementById("lang-menu");if(e&&n){const t={en:"",zh:"zh/",ja:"ja/"},i=t=>{const i=n.classList.contains("hidden");void 0===t&&(t=i),t?(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true")):(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"))};e.addEventListener("click",t=>{t.stopPropagation(),i()}),document.addEventListener("click",t=>{n.contains(t.target)||e.contains(t.target)||i(!1)}),document.addEventListener("keydown",t=>{"Escape"!==t.key||n.classList.contains("hidden")||(i(!1),e.focus())});const o=n.querySelectorAll("a"),d=(t,e,n)=>{const i=document.querySelector(`meta[${t}="${e}"]`);i&&(i.content=n)},c=(t,e)=>{Object.entries(e).forEach(([e,n])=>d(t,e,n))},a=(t,e)=>{const n=document.getElementById(t);n&&(n.innerText=e)},r=(t,e)=>{const n=document.getElementById(t);n&&(n.innerHTML=e)},s=t=>{t&&(t.classList.remove("animate-fade-in"),t.offsetWidth,t.classList.add("animate-fade-in"))},l=e=>{try{const n=new URL(e,window.location.origin).pathname,[,i]=n.split("/");return Object.keys(t).find(e=>t[e].startsWith(`${i}/`))||"en"}catch(t){return"en"}},m=e=>{const n=window.I18N&&window.I18N[e];if(!n)return;if(document.documentElement.lang=e,document.title=n.title,c("name",{title:n.title,description:n.description}),c("property",{"og:title":n.title,"og:description":n.description,"twitter:title":n.title,"twitter:description":n.description}),window.SITE_CONFIG){const n=`${window.SITE_CONFIG.siteUrl}${t[e]||""}`;c("property",{"og:url":n,"twitter:url":n})}a("profile-name",n.name),r("profile-bio",n.bio),a("contact-text",n.saveContact);const i=document.getElementById("contact-btn");i&&window.SITE_CONFIG&&(i.href=`${window.SITE_CONFIG.baseUrl}${e}.vcf`);const d=document.getElementById("profile-name");d&&d.parentElement&&s(d.parentElement),s(document.getElementById("contact-text")),s(document.getElementById("contact-icon")),o.forEach(t=>{const n=l(t.getAttribute("href"))===e?"add":"remove";t.classList[n]("bg-gray-50","dark:bg-zinc-700/50","font-bold")})};window.I18N&&window.SITE_CONFIG&&(o.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=t.getAttribute("href"),o=l(n);m(o),window.history.pushState({lang:o},"",n),i(!1)})}),window.addEventListener("popstate",()=>{const t=l(window.location.href);m(t)}))}});