window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t}),(()=>{const t={en:"",zh:"zh/",ja:"ja/"},e=Object.fromEntries(Object.entries(t).map(([t,e])=>[e,t])),n=new Set(Object.keys(t)),o=(t=window.location.pathname)=>{const n=t.startsWith("http")?t.replace(/^https?:\/\/[^/]+/,""):t,[,o=""]=n.replace(/^\/+/,"/").split("/");return e[o?`${o}/`:""]??"en"},a=t=>{if(!t||"string"!=typeof t)return null;const e=t.toLowerCase(),o=e.split("-")[0];return n.has(e)?e:n.has(o)?o:null},i=(()=>{if("en"!==o())return!1;const e="preferredLangRedirected";if("true"===sessionStorage.getItem(e))return!1;const n=(()=>{const t=Array.isArray(navigator.languages)&&navigator.languages.length?navigator.languages:[navigator.language];for(const e of t){const t=a(e);if(t)return t}return"en"})();return!(!n||"en"===n)&&(sessionStorage.setItem(e,"true"),document.documentElement.classList.add("redirecting"),window.location.replace((e=>{const n=window.SITE_CONFIG?.baseUrl??"/";return`${n.endsWith("/")?n:`${n}/`}${t[e]||""}`})(n)),!0)})();document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("avatar-img");e&&e.addEventListener("error",function(){this.src="https://ui-avatars.com/api/?name=Wu+Zi&background=random"});const n=document.getElementById("lang-menu-btn"),a=document.getElementById("lang-menu");if(n&&a){const e=t=>{const e=a.classList.contains("hidden");void 0===t&&(t=e),t?(a.classList.remove("hidden"),n.setAttribute("aria-expanded","true")):(a.classList.add("hidden"),n.setAttribute("aria-expanded","false"))};n.addEventListener("click",t=>{t.stopPropagation(),e()}),document.addEventListener("click",t=>{a.contains(t.target)||n.contains(t.target)||e(!1)}),document.addEventListener("keydown",t=>{"Escape"!==t.key||a.classList.contains("hidden")||(e(!1),n.focus())});const r=t=>{if(t?.dataset?.lang)return t.dataset.lang;const e=t?.getAttribute("href")||window.location.pathname;return o(e)},c=a.querySelectorAll("a"),s=new Map(Array.from(c,t=>[t,r(t)])),d={name:new Map,property:new Map},l=(t,e)=>{e.forEach(e=>{const n=document.querySelector(`meta[${t}="${e}"]`);n&&d[t].set(e,n)})};l("name",["title","description"]),l("property",["og:title","og:description","twitter:title","twitter:description","og:url","twitter:url"]);const u={profileName:document.getElementById("profile-name"),profileBio:document.getElementById("profile-bio"),contactBtn:document.getElementById("contact-btn"),contactText:document.getElementById("contact-text"),contactIcon:document.getElementById("contact-icon")},m=u.profileName?.parentElement,p=Array.from(document.querySelectorAll("[data-i18n]")).map(t=>({element:t,key:t.dataset.i18n,type:t.dataset.i18nType||"text"})),g=(t,e,n)=>{const o=d[t].get(e);o&&(o.content=n)},w=(t,e)=>{Object.entries(e).forEach(([e,n])=>g(t,e,n))},f=t=>{t&&(t.classList.remove("animate-fade-in"),t.offsetWidth,t.classList.add("animate-fade-in"))},y=t=>{p.forEach(({element:e,key:n,type:o})=>{const a=t?.[n];void 0!==a&&("html"===o?e.innerHTML=a:e.innerText=a)})};let h=null;const E=(e,{animate:n=!0}={})=>{if(!e||e===h)return;const o=window.I18N&&window.I18N[e];if(o){if(document.documentElement.lang=e,document.title=o.title,w("name",{title:o.title,description:o.description}),w("property",{"og:title":o.title,"og:description":o.description,"twitter:title":o.title,"twitter:description":o.description}),window.SITE_CONFIG){const n=`${window.SITE_CONFIG.siteUrl}${t[e]||""}`;w("property",{"og:url":n,"twitter:url":n})}y(o),u.contactBtn&&window.SITE_CONFIG&&(u.contactBtn.href=`${window.SITE_CONFIG.baseUrl}${e}.vcf`),n&&(m&&f(m),f(u.contactText),f(u.contactIcon)),c.forEach(t=>{const n=s.get(t)===e?"add":"remove";t.classList[n]("bg-gray-50","dark:bg-zinc-700/50","font-bold")}),h=e}};if(window.I18N){c.forEach(t=>{const n=s.get(t);t.addEventListener("click",o=>{o.preventDefault();const a=t.getAttribute("href");E(n),window.history.pushState({lang:n},"",a),e(!1)})}),window.addEventListener("popstate",()=>{const t=o(window.location.pathname);E(t)});const t=o();E(t,{animate:!i})}}})})();