window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("avatar-img");t&&t.addEventListener("error",function(){this.src="https://ui-avatars.com/api/?name=Wu+Zi&background=random"});const e=document.getElementById("lang-menu-btn"),n=document.getElementById("lang-menu");if(e&&n){const t=t=>{const o=n.classList.contains("hidden");void 0===t&&(t=o),t?(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true")):(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"))};e.addEventListener("click",e=>{e.stopPropagation(),t()}),document.addEventListener("click",o=>{n.contains(o.target)||e.contains(o.target)||t(!1)}),document.addEventListener("keydown",o=>{"Escape"!==o.key||n.classList.contains("hidden")||(t(!1),e.focus())});const o=async t=>{const e=["profile-name","profile-bio","contact-text","contact-icon"];e.forEach(t=>{const e=document.getElementById(t);e&&e.classList.add("opacity-0")}),await new Promise(t=>setTimeout(t,200)),["profile-name","profile-bio","contact-text","footer-text"].forEach(e=>(e=>{const n=t.getElementById(e),o=document.getElementById(e);n&&o&&(o.innerHTML=n.innerHTML)})(e));const o=t.getElementById("contact-btn"),a=document.getElementById("contact-btn");o&&a&&(a.setAttribute("href",o.getAttribute("href")),a.setAttribute("download",o.getAttribute("download"))),document.title=t.title;const i=t.getElementById("lang-menu");i&&(n.innerHTML=i.innerHTML),requestAnimationFrame(()=>{e.forEach(t=>{const e=document.getElementById(t);e&&e.classList.remove("opacity-0")})})},a=async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");const n=await e.text(),a=(new DOMParser).parseFromString(n,"text/html");await o(a)}catch(e){console.error("Navigation failed:",e),window.location.href=t}};n.addEventListener("click",async e=>{const n=e.target.closest('a[role="menuitem"]');if(n){e.preventDefault();const o=n.getAttribute("href");t(!1),window.history.pushState({},"",o),await a(o)}}),window.addEventListener("popstate",()=>{a(window.location.href)})}});